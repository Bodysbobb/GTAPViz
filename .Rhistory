har_data_raw
)
)
# Apply mapping info
har_data <- add_mapping_info(har_data, external_map = harfile, mapping = mapping_info)
# Apply filters
har_data <- .apply_filters(
har_data,
region_select = region_select,
experiment_select = experiment,
sector_select = sector_select
)
# Assign to global environment if name provided
if (!is.null(har_list_name)) {
assign(har_list_name, har_data, envir = .GlobalEnv)
}
# Add to result list
result$har_data <- har_data
}
}
message("GTAP plotting data extraction completed!")
return(invisible(NULL))
}
Macros <- do.call(gtap_macros_data, c(as.list(paste0(input.folder, "/", case.name, ".sl4")),
list(experiment_names = case.name)))
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
warning = FALSE,
message = FALSE,
eval = requireNamespace("GTAPViz", quietly = TRUE)
)
rm(list=ls())
required_pkgs <- c("tidyverse", "writexl", "dplyr", "devtools",
"openxlsx", "readxl", "knitr", "rmarkdown", "data.table",
"ggplot2", "tcltk", "gridExtra", "haven", "citation", "tinytex", "bookdown", "HARplus")
# Load packages quietly, but only if available
lapply(required_pkgs, function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
warning(sprintf("Package '%s' is not installed. Please install it before running this vignette.", pkg))
}
})
# Directory
project.folder <- "D:/One Drive/OneDrive - purdue.edu/GTAPViz Data/Plot"
input.folder <- paste0(project.folder, "/in")
output.folder <- paste0(project.folder, "/out")
map.folder <- paste0(project.folder, "/map")
mapping.output <- paste0(map.folder, "/OutputMapping.xlsx")
sl4plot <- readxl::read_xlsx(mapping.output, sheet = "SL4File")
harplot <- readxl::read_xlsx(mapping.output, sheet = "HARFile")
setwd <- "D:/GitHub/GTAPViz/R"
devtools::load_all()
#devtools::install_github("Bodysbobb/GTAPViz")
# Chunk 3: package
library(GTAPViz)
# Chunk 4: Input Setup
# Define experiment name / output name
case.name <- c("US_All", "US_All_RetalTar", "US_All_ReduceTar50", "US_All_RegReduceTar50",
"US_All10", "US_All10_RetalTar", "US_All10_ReduceTar50", "US_All10_RegReduceTar50")
# Adding Description / Unit (Yes/No/GTAPv7/Mix)
info.mode <- "Mix"
# Chunk 5: Preparing Data for Plot
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
# Chunk 7: Optional Convert Unit and Rename Columns
# Convert Value if Needed
sl4.plot.data <- convert_units(
sl4.plot.data,
change_unit_from = c("million USD"),
change_unit_to = c("billion USD"),
adjustment = c("/1000")
)
har.plot.data <- convert_units(
har.plot.data,
change_unit_from = c("million USD"),
change_unit_to = c("billion USD"),
adjustment = c("/1000")
)
# Convert the column name if needed
rename_col <- data.frame(
old = c("REG", "COMM", "ACTS"),
new = c("Region", "Commodity", "Activity")
)
sl4.plot.data <- HARplus::rename_dims(sl4.plot.data, rename_col)
har.plot.data <- HARplus::rename_dims(har.plot.data, rename_col)
# Chunk 9
knitr::include_graphics("https://raw.githubusercontent.com/Bodysbobb/GTAPViz/main/vignettes/images/cpsplot.png")
Macros <- do.call(gtap_macros_data, c(as.list(paste0(input.folder, "/", case.name, ".sl4")),
list(experiment_names = case.name)))
View(Macros)
devtools::check()
devtools::check()
rm(list=ls())
devtools::check()
devtools::check()
devtools::check()
devtools::check()
tools::showNonASCIIfile
tools::showNonASCIIfile("R/GTAPauto.R")
tools::showNonASCIIfile("R/GTAPauto.R")
devtools::check()
devtools::check()
devtools::check()
source("~/.active-rstudio-document", echo=TRUE)
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
warning = FALSE,
message = FALSE,
eval = requireNamespace("GTAPViz", quietly = TRUE)
)
rm(list=ls())
required_pkgs <- c("tidyverse", "writexl", "dplyr", "devtools",
"openxlsx", "readxl", "knitr", "rmarkdown", "data.table",
"ggplot2", "tcltk", "gridExtra", "haven", "citation", "tinytex", "bookdown", "HARplus")
# Load packages quietly, but only if available
lapply(required_pkgs, function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
warning(sprintf("Package '%s' is not installed. Please install it before running this vignette.", pkg))
}
})
# Directory
project.folder <- "D:/One Drive/OneDrive - purdue.edu/GTAPViz Data/Plot"
input.folder <- paste0(project.folder, "/in")
output.folder <- paste0(project.folder, "/out")
map.folder <- paste0(project.folder, "/map")
mapping.output <- paste0(map.folder, "/OutputMapping.xlsx")
sl4plot <- readxl::read_xlsx(mapping.output, sheet = "SL4File")
harplot <- readxl::read_xlsx(mapping.output, sheet = "HARFile")
setwd <- "D:/GitHub/GTAPViz/R"
devtools::load_all()
#devtools::install_github("Bodysbobb/GTAPViz")
# Chunk 3: package
library(GTAPViz)
# Chunk 4: Input Setup
# Define experiment name / output name
case.name <- c("US_All", "US_All_RetalTar", "US_All_ReduceTar50", "US_All_RegReduceTar50",
"US_All10", "US_All10_RetalTar", "US_All10_ReduceTar50", "US_All10_RegReduceTar50")
# Adding Description / Unit (Yes/No/GTAPv7/Mix)
info.mode <- "Mix"
# Chunk 5: Preparing Data for Plot
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
# Chunk 7: Optional Convert Unit and Rename Columns
# Convert Value if Needed
sl4.plot.data <- convert_units(
sl4.plot.data,
change_unit_from = c("million USD"),
change_unit_to = c("billion USD"),
adjustment = c("/1000")
)
har.plot.data <- convert_units(
har.plot.data,
change_unit_from = c("million USD"),
change_unit_to = c("billion USD"),
adjustment = c("/1000")
)
# Convert the column name if needed
rename_col <- data.frame(
old = c("REG", "COMM", "ACTS"),
new = c("Region", "Commodity", "Activity")
)
sl4.plot.data <- HARplus::rename_dims(sl4.plot.data, rename_col)
har.plot.data <- HARplus::rename_dims(har.plot.data, rename_col)
# Chunk 9
knitr::include_graphics("https://raw.githubusercontent.com/Bodysbobb/GTAPViz/main/vignettes/images/cpsplot.png")
View(sl4.plot.data)
rm(list=ls())
devtools::check()
devtools::check()
devtools::check()
.Last.error
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
warning = FALSE,
message = FALSE,
eval = requireNamespace("GTAPViz", quietly = TRUE)
)
rm(list=ls())
required_pkgs <- c("tidyverse", "writexl", "dplyr", "devtools",
"openxlsx", "readxl", "knitr", "rmarkdown", "data.table",
"ggplot2", "tcltk", "gridExtra", "haven", "citation", "tinytex", "bookdown", "HARplus")
# Load packages quietly, but only if available
lapply(required_pkgs, function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
warning(sprintf("Package '%s' is not installed. Please install it before running this vignette.", pkg))
}
})
# Directory
project.folder <- "D:/One Drive/OneDrive - purdue.edu/GTAPViz Data/Plot"
input.folder <- paste0(project.folder, "/in")
output.folder <- paste0(project.folder, "/out")
map.folder <- paste0(project.folder, "/map")
mapping.output <- system.file("extdata", "map", "OutputMapping.xlsx", package = "GTAPViz")
sl4map <- readxl::read_xlsx(mapping.output, sheet = "SL4File")
harmap <- readxl::read_xlsx(mapping.output, sheet = "HARFile")
setwd <- "D:/GitHub/GTAPViz/R"
devtools::load_all()
#devtools::install_github("Bodysbobb/GTAPViz")
# Chunk 3: package
library(GTAPViz)
# Chunk 4: Input Setup
# Define experiment name / output name
case.name <- c("US_All", "US_All_RetalTar", "US_All_ReduceTar50", "US_All_RegReduceTar50",
"US_All10", "US_All10_RetalTar", "US_All10_ReduceTar50", "US_All10_RegReduceTar50")
# Adding Description / Unit (Yes/No/GTAPv7/Mix)
info.mode <- "Mix"
# Chunk 5: Preparing Data for Plot
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
RM(LIST=LS())
RM(LIST=LS())
rm(list=ls())
devtools::check()
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
warning = FALSE,
message = FALSE,
eval = requireNamespace("GTAPViz", quietly = TRUE)
)
rm(list=ls())
required_pkgs <- c("tidyverse", "writexl", "dplyr", "devtools",
"openxlsx", "readxl", "knitr", "rmarkdown", "data.table",
"ggplot2", "tcltk", "gridExtra", "haven", "citation", "tinytex", "bookdown", "HARplus")
# Load packages quietly, but only if available
lapply(required_pkgs, function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
warning(sprintf("Package '%s' is not installed. Please install it before running this vignette.", pkg))
}
})
# Directory
project.folder <- "D:/One Drive/OneDrive - purdue.edu/GTAPViz Data/Plot"
input.folder <- paste0(project.folder, "/in")
output.folder <- paste0(project.folder, "/out")
map.folder <- paste0(project.folder, "/map")
mapping.output <- system.file("extdata", "map", "OutputMapping.xlsx", package = "GTAPViz")
sl4plot <- readxl::read_xlsx(mapping.output, sheet = "SL4File")
hRplot <- readxl::read_xlsx(mapping.output, sheet = "HARFile")
setwd <- "D:/GitHub/GTAPViz/R"
devtools::load_all()
#devtools::install_github("Bodysbobb/GTAPViz")
# Chunk 3: package
library(GTAPViz)
# Chunk 4: Input Setup
# Define experiment name / output name
case.name <- c("US_All", "US_All_RetalTar", "US_All_ReduceTar50", "US_All_RegReduceTar50",
"US_All10", "US_All10_RetalTar", "US_All10_ReduceTar50", "US_All10_RegReduceTar50")
# Adding Description / Unit (Yes/No/GTAPv7/Mix)
info.mode <- "Mix"
# Chunk 5: Preparing Data for Plot
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
warning = FALSE,
message = FALSE,
eval = requireNamespace("GTAPViz", quietly = TRUE)
)
rm(list=ls())
required_pkgs <- c("tidyverse", "writexl", "dplyr", "devtools",
"openxlsx", "readxl", "knitr", "rmarkdown", "data.table",
"ggplot2", "tcltk", "gridExtra", "haven", "citation", "tinytex", "bookdown", "HARplus")
# Load packages quietly, but only if available
lapply(required_pkgs, function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
warning(sprintf("Package '%s' is not installed. Please install it before running this vignette.", pkg))
}
})
# Directory
project.folder <- "D:/One Drive/OneDrive - purdue.edu/GTAPViz Data/Plot"
input.folder <- paste0(project.folder, "/in")
output.folder <- paste0(project.folder, "/out")
map.folder <- paste0(project.folder, "/map")
mapping.output <- system.file("extdata", "map", "OutputMapping.xlsx", package = "GTAPViz")
sl4plot <- readxl::read_xlsx(mapping.output, sheet = "SL4File")
harplot <- readxl::read_xlsx(mapping.output, sheet = "HARFile")
setwd <- "D:/GitHub/GTAPViz/R"
devtools::load_all()
#devtools::install_github("Bodysbobb/GTAPViz")
# Chunk 3: package
library(GTAPViz)
# Chunk 4: Input Setup
# Define experiment name / output name
case.name <- c("US_All", "US_All_RetalTar", "US_All_ReduceTar50", "US_All_RegReduceTar50",
"US_All10", "US_All10_RetalTar", "US_All10_ReduceTar50", "US_All10_RegReduceTar50")
# Adding Description / Unit (Yes/No/GTAPv7/Mix)
info.mode <- "Mix"
# Chunk 5: Preparing Data for Plot
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
rm(list=ls())
devtools::check()
pkgdown::build_site(
new_process = TRUE,
install = TRUE
)
pkgdown::build_site(
new_process = TRUE,
install = TRUE
)
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
warning = FALSE,
message = FALSE,
eval = requireNamespace("GTAPViz", quietly = TRUE)
)
rm(list=ls())
required_pkgs <- c("tidyverse", "writexl", "dplyr", "devtools",
"openxlsx", "readxl", "knitr", "rmarkdown", "data.table",
"ggplot2", "tcltk", "gridExtra", "haven", "citation", "tinytex", "bookdown", "HARplus")
# Load packages quietly, but only if available
lapply(required_pkgs, function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
warning(sprintf("Package '%s' is not installed. Please install it before running this vignette.", pkg))
}
})
# Directory
project.folder <- "D:/One Drive/OneDrive - purdue.edu/GTAPViz Data/Plot"
input.folder <- paste0(project.folder, "/in")
output.folder <- paste0(project.folder, "/out")
map.folder <- paste0(project.folder, "/map")
mapping.output <- system.file("extdata", "map", "OutputMapping.xlsx", package = "GTAPViz")
sl4plot <- readxl::read_xlsx(mapping.output, sheet = "SL4File")
harplot <- readxl::read_xlsx(mapping.output, sheet = "HARFile")
setwd <- "D:/GitHub/GTAPViz/R"
devtools::load_all()
#devtools::install_github("Bodysbobb/GTAPViz")
# Chunk 3: package
library(GTAPViz)
# Chunk 4: Input Setup
# Define experiment name / output name
case.name <- c("US_All", "US_All_RetalTar", "US_All_ReduceTar50", "US_All_RegReduceTar50",
"US_All10", "US_All10_RetalTar", "US_All10_ReduceTar50", "US_All10_RegReduceTar50")
# Adding Description / Unit (Yes/No/GTAPv7/Mix)
info.mode <- "Mix"
# Chunk 5: Preparing Data for Plot
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
rm(list=ls())
pkgdown::build_site(
new_process = TRUE,
install = TRUE
)
setwd("D:/GitHub/GTAPViz")
pkgdown::clean_site()  # Remove old files
pkgdown::build_site()  # Rebuild everything
pkgdown::build_site(
new_process = TRUE,
install = TRUE
)
pkgdown::build_site(
new_process = TRUE,
install = TRUE
)
# Chunk 1
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
warning = FALSE,
message = FALSE,
eval = requireNamespace("GTAPViz", quietly = TRUE)
)
rm(list=ls())
required_pkgs <- c("tidyverse", "writexl", "dplyr", "devtools",
"openxlsx", "readxl", "knitr", "rmarkdown", "data.table",
"ggplot2", "tcltk", "gridExtra", "haven", "citation", "tinytex", "bookdown", "HARplus")
# Load packages quietly, but only if available
lapply(required_pkgs, function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
warning(sprintf("Package '%s' is not installed. Please install it before running this vignette.", pkg))
}
})
# Directory
project.folder <- "D:/One Drive/OneDrive - purdue.edu/GTAPViz Data/Plot"
input.folder <- paste0(project.folder, "/in")
output.folder <- paste0(project.folder, "/out")
map.folder <- paste0(project.folder, "/map")
mapping.output <- system.file("extdata", "map", "OutputMapping.xlsx", package = "GTAPViz")
sl4plot <- readxl::read_xlsx(mapping.output, sheet = "SL4File")
harplot <- readxl::read_xlsx(mapping.output, sheet = "HARFile")
setwd <- "D:/GitHub/GTAPViz/R"
devtools::load_all()
#devtools::install_github("Bodysbobb/GTAPViz")
# Chunk 3: package
library(GTAPViz)
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
# Define experiment name / output name
case.name <- c("US_All", "US_All_RetalTar", "US_All_ReduceTar50", "US_All_RegReduceTar50",
"US_All10", "US_All10_RetalTar", "US_All10_ReduceTar50", "US_All10_RegReduceTar50")
# Adding Description / Unit (Yes/No/GTAPv7/Mix)
info.mode <- "Mix"
# Region to be plotted
selected_regions <- c("USA", "CHN", "CAN", "ASEAN", "ROW")
# Sector to be plotted (NULL to select all)
selected_sector <- NULL
# Extract data with region and experiment filters
plot.dta <- plot_gtap_data(
sl4file = sl4plot,
harfile = harplot,
experiment  = case.name,
mapping_info = info.mode,
region_select  = selected_regions,
sector_select = selected_sector,
project_dir = project.folder,
subtotal = FALSE
)
View(har.plot.data)
View(sl4.plot.data)
View(sl4.plot.data[["REG"]])
View(har.plot.data)
